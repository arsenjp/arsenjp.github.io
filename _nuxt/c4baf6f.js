(window.webpackJsonp=window.webpackJsonp||[]).push([[48,28],{653:function(e,t,r){var content=r(655);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(27).default)("6333d4fe",content,!0,{sourceMap:!1})},654:function(e,t,r){"use strict";r(653)},655:function(e,t,r){var n=r(26)(!1);n.push([e.i,".lds-ring[data-v-6f49ae7c]{display:inline-block;position:relative;width:80px;height:80px}.lds-ring div[data-v-6f49ae7c]{box-sizing:border-box;display:block;position:absolute;width:64px;height:64px;margin:5px;border-radius:50%;-webkit-animation:lds-ring-6f49ae7c 1.2s cubic-bezier(.5,0,.5,1) infinite;animation:lds-ring-6f49ae7c 1.2s cubic-bezier(.5,0,.5,1) infinite;border:5px solid transparent;border-top-color:#2196f3}.lds-ring div[data-v-6f49ae7c]:first-child{-webkit-animation-delay:-.45s;animation-delay:-.45s}.lds-ring div[data-v-6f49ae7c]:nth-child(2){-webkit-animation-delay:-.3s;animation-delay:-.3s}.lds-ring div[data-v-6f49ae7c]:nth-child(3){-webkit-animation-delay:-.15s;animation-delay:-.15s}@-webkit-keyframes lds-ring-6f49ae7c{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes lds-ring-6f49ae7c{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}",""]),e.exports=n},656:function(e,t,r){"use strict";r.r(t);var n={name:"LoadingSpinner"},o=(r(654),r(86)),component=Object(o.a)(n,(function(){this._self._c;return this._m(0)}),[function(){var e=this._self._c;return e("div",{staticClass:"text-center",staticStyle:{"margin-top":"10px"}},[e("div",{staticClass:"lds-ring"},[e("div"),e("div"),e("div"),e("div")])])}],!1,null,"6f49ae7c",null);t.default=component.exports},744:function(e,t,r){var content=r(776);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(27).default)("e6b6a746",content,!0,{sourceMap:!1})},745:function(e,t,r){var content=r(778);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(27).default)("9e6ef3da",content,!0,{sourceMap:!1})},771:function(e,t,r){e.exports=r.p+"img/default_background.d17663a.jpg"},774:function(e,t,r){e.exports=r.p+"img/default_profile.18de71f.png"},775:function(e,t,r){"use strict";r(744)},776:function(e,t,r){var n=r(26)(!1);n.push([e.i,"body[data-v-154c66f6]{--text-opacity:1;color:#2d3748;color:rgba(45,55,72,var(--text-opacity));font-size:1.125rem;font-family:Roboto;font-weight:500;line-height:1.5}code[data-v-154c66f6],kbd[data-v-154c66f6],pre[data-v-154c66f6],samp[data-v-154c66f6]{font-family:Inconsolata,monospace;font-size:1.125rem;border-radius:5px!important;color:#fff;background:#282b2e}span[data-v-154c66f6]{display:flex;justify-content:center;align-items:center}",""]),e.exports=n},777:function(e,t,r){"use strict";r(745)},778:function(e,t,r){var n=r(26)(!1);n.push([e.i,"body{--text-opacity:1;color:#2d3748;color:rgba(45,55,72,var(--text-opacity));font-size:1.125rem;font-family:Roboto;font-weight:500;line-height:1.5}code,kbd,pre,samp{font-family:Inconsolata,monospace;font-size:1.125rem;border-radius:5px!important;color:#fff;background:#282b2e}.v-autocomplete__content{max-height:150px!important}@media screen and (min-width:600px){.event-table-sp-small{display:none}}.event-table-sp-small .v-row-group__header{display:none}@media screen and (max-width:599px){.event-table-pc{display:none}}@media screen and (min-width:600px){.event-table-sp{display:none}}.event-table{background-color:#fff}.event-table .v-data-table-header-mobile__wrapper{display:none}.event-table .v-data-table__wrapper{overflow-y:overlay!important}@media screen and (max-width:599px){.event-table .v-data-table__wrapper{min-height:400px}}@media screen and (min-width:600px){.event-table{position:relative;padding-top:55px}.event-table .v-input{margin-top:-50px;margin-bottom:32px}}@media screen and (max-width:599px){.event-table{padding-top:20px}.event-table .v-input{margin-right:0!important;margin-left:0!important;padding-left:16px;padding-right:16px}}.event-table .v-data-table-header span{font-size:16px!important}@media screen and (min-width:600px){.event-table .v-data-table-header{position:absolute;top:55px;width:100%}.event-table .v-data-table-header tr{display:flex;justify-content:space-around;align-items:center}.event-table .v-data-table-header tr th{flex:1 1 auto;display:flex;align-items:center}}@media screen and (max-width:599px){.event-table .v-data-table-header{display:none}}@media screen and (max-width:599px){.event-table .v-data-footer{height:58px;display:flex;justify-content:flex-end}.event-table .v-data-footer .v-data-footer__icons-after,.event-table .v-data-footer .v-data-footer__icons-before{font-size:16px}.event-table .v-data-footer .v-data-footer__select{display:none}.event-table .v-data-footer .v-data-footer__pagination{font-size:16px}}@media screen and (min-width:600px){.event-table .v-data-footer{height:58px;display:flex;justify-content:flex-end}.event-table .v-data-footer .v-data-footer__icons-after,.event-table .v-data-footer .v-data-footer__icons-before,.event-table .v-data-footer .v-data-footer__select{display:none}.event-table .v-data-footer .v-data-footer__pagination{font-size:16px}}.event-table .v-row-group__header{display:none}.event-table .v-data-footer{flex-wrap:nowrap}.table-body .table-row-pc{height:77px}.table-body .table-row-pc td .v-card__text{font-size:16px;padding-left:0}.table-body .table-row-pc td .v-card__text:first-child{padding-right:0}@media screen and (max-width:599px){.table-body .table-row-pc{display:none}}.table-body .table-row-sp{display:flex;flex-direction:column;justify-content:center;align-items:center;border-bottom:thin solid rgba(0,0,0,.12)}.table-body .table-row-sp div{width:100%}.table-body .table-row-sp div td{width:100%;display:flex;flex-direction:row;justify-content:space-between;border:0!important}.table-body .table-row-sp div td .v-card__text:first-child{font-weight:700}.table-body .table-row-sp div td .v-card__text:first-child,.table-body .table-row-sp div td .v-card__text:last-child{font-size:16px;width:-webkit-fit-content!important;width:-moz-fit-content!important;width:fit-content!important;padding:20px}.table-body .table-row-sp div td:nth-child(2) .v-card__text:first-child,.table-body .table-row-sp div td:nth-child(2) .v-card__text:last-child{padding:0 20px}@media screen and (min-width:600px){.table-body .table-row-sp{display:none}}.add-event-photo-comment .v-textarea .v-input__control .v-input__slot{padding-bottom:10px!important}",""]),e.exports=n},829:function(e,t,r){"use strict";r.r(t);var n=r(715),o=r(122),c=r(112),l=r(90),m=r(477),d=r(476),f=r(694),v=r(249),h=r(813),x=r(719),w=r(121),y=r(238),I=r(475),k=r(248),_=r(191),U=(r(20),r(16),r(19),r(23),r(24),r(55),r(70),r(75),r(79),r(22)),S=r(3),F=(r(65),r(35),r(66),r(56),r(8),r(44),r(47),r(167),r(88),r(39),r(43),r(17),r(74),r(251),r(206),r(705)),R=r(94);function j(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function O(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function A(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(t){Object(S.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var D={middleware:"auth",components:{Spinner:r(656).default},layout:"default",name:"profile",data:function(){return{settingProfileHide:!1,initialSetupProfileShow:!0,searchEvent:"",imgFailed:!1,selectMaxDisplay:1,groupBy:"",groupDesc:!0,sortBy:"relevanceValue",sortDesc:!1,registeredEvents:[],valid:!1,pageLoaded:!1,uploadReadyAvatar:!0,uploadReadyBackground:!0,hoverAvatar:!1,avatarDialog:!1,hoverBackground:!1,backgroundDialog:!1,newInfoDialog:!1,error:null,success:null,avatarImage:{imageUrl:"",teaserImageUrl:""},backgroundImage:{imageUrl:"",teaserImageUrl:""},file:null,avatarFile:null,backgroundFile:null,fileType:"file",acceptType:"image/*",isAvatar:!1,isBackground:!1,isChangingAvatarImage:!1,isChangingBackgroundImage:!1,isUploadingAvatarImage:!1,isUploadingBackgroundImage:!1,isDeletingAvatarImage:!1,isDeletingBackgroundImage:!1,tempForm:{},tempFormShow:{},tempFormShowPrev:null,nickName:"",firstName:"",lastName:"",email:"",avatarSizeRules:[function(e){return!e||e.size<2e6||"Avatar size should be less than 2 MB!"}],backgroundSizeRules:[function(e){return!e||e.size<5e6||"Background size should be less than 5 MB!"}],emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)||"E-mail must be valid"}],nickNameRules:[function(e){return e.length<=20||"Name must be less than 20 characters"}],firstNameRules:[function(e){return!!e&&!!e.replace(/\s/g,"").length||"First Name is required"},function(e){return!!e&&e.length<=20||"Name must be less than 20 characters"}],lastNameRules:[function(e){return!!e||"Last Name is required"},function(e){return!!e&&e.length<=20||"Name must be less than 20 characters"}],FULL_IMAGE:{maxDimension:1280,quality:.9},THUMB_IMAGE:{maxDimension:640,quality:.7}}},computed:A({limitReached:function(){return!(!this.tempForm||!this.tempForm.interests||5!=this.tempForm.interests.length)},isMobileScreen:function(){return!(window.innerWidth>800)},user:function(){return this.$store.state.authUser}},Object(R.e)({account:function(e){return e.account.ACCOUNT}})),created:function(){var e=this;return Object(U.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getInfo();case 2:case"end":return t.stop()}}),t)})))()},watch:{tempFormShow:{handler:function(e,t){var r=this;return Object(U.a)(regeneratorRuntime.mark((function t(){var n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.tempFormShowPrev){t.next=8;break}return r.settingProfileHide=!0,r.tempFormShowPrev=Object(F.cloneDeep)(e),n={profileShow:Object(F.cloneDeep)(e)},t.next=6,r.$fire.firestore.collection("users").doc(r.user.uid).update(n).then((function(){r.setAccountProfileshow(n)}));case 6:return r.settingProfileHide=!1,t.abrupt("return");case 8:if(!Object(F.isEqual)(r.tempFormShowPrev,e)){t.next=12;break}return r.tempFormShowPrev=Object(F.cloneDeep)(e),t.abrupt("return");case 12:return r.settingProfileHide=!0,data={profileShow:Object(F.cloneDeep)(e)},t.prev=15,t.next=18,r.$fire.firestore.collection("users").doc(r.user.uid).update(data).then((function(){r.success="Successfully updated!!",r.setAccountProfileshow(data),r.settingProfileHide=!1,r.tempFormShowPrev=Object(F.cloneDeep)(e),setTimeout((function(){r.success=null}),2e3)}));case 18:t.next=25;break;case 20:t.prev=20,t.t0=t.catch(15),r.error=t.t0||"Could not set user information visibility",r.settingProfileHide=!1,setTimeout((function(){r.error=null}),2e3);case 25:case"end":return t.stop()}}),t,null,[[15,20]])})))()},deep:!0}},methods:A(A(A({fillForm:function(){this.tempForm={nickName:this.nickName,firstName:this.firstName,lastName:this.lastName,email:this.email}},fillFromForm:function(){this.nickName=this.tempForm.nickName,this.firstName=this.tempForm.firstName,this.lastName=this.tempForm.lastName,this.email=this.tempForm.email},handleClick:function(e){this.$router.push({path:"/event/".concat(e.id)})},onReset:function(e){},deleteAvatarImage:function(){var e=this;return Object(U.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isdeletingAvatarImage=!0,r=e.$fire.storage.refFromURL(e.avatarImage.imageUrl).delete(),n=e.$fire.storage.refFromURL(e.avatarImage.teaserImageUrl).delete(),t.abrupt("return",Promise.all([r,n]).then(Object(U.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.avatarImage.imageUrl="",e.avatarImage.teaserImageUrl="",t.next=4,e.updateUserImageFirestore(0);case 4:return t.abrupt("return",null);case 5:case"end":return t.stop()}}),t)})))).catch(function(){var t=Object(U.a)(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.error("Error deleting image",r),"storage/object-not-found"!==r.code){t.next=6;break}return e.avatarImage.imageUrl="",e.avatarImage.teaserImageUrl="",t.next=6,e.updateUserImageFirestore(0);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).finally((function(){e.isdeletingAvatarImage=!1})));case 4:case"end":return t.stop()}}),t)})))()},deleteBackgroundImage:function(){var e=this;return Object(U.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isdeletingBackgroundImage=!0,r=e.$fire.storage.refFromURL(e.backgroundImage.imageUrl).delete(),n=e.$fire.storage.refFromURL(e.backgroundImage.teaserImageUrl).delete(),t.abrupt("return",Promise.all([r,n]).then(Object(U.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.backgroundImage.imageUrl="",e.backgroundImage.teaserImageUrl="",t.next=4,e.updateUserImageFirestore(1);case 4:return t.abrupt("return",null);case 5:case"end":return t.stop()}}),t)})))).catch(function(){var t=Object(U.a)(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.error("Error deleting image",r),"storage/object-not-found"!==r.code){t.next=6;break}return e.backgroundImage.imageUrl="",e.backgroundImage.teaserImageUrl="",t.next=6,e.updateUserImageFirestore(1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).finally((function(){e.isdeletingBackgroundImage=!1})));case 4:case"end":return t.stop()}}),t)})))()},saveNewUserImage:function(e){var t=this;return Object(U.a)(regeneratorRuntime.mark((function r(){var n,o,c,l,m,d,f,v;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e?t.isChangingBackgroundImage=!0:t.isChangingAvatarImage=!0,t.file&&t.file.type.match("image.*")){r.next=6;break}return alert("Please upload an image."),t.isChangingBackgroundImage=!1,t.isChangingAvatarImage=!1,r.abrupt("return");case 6:return n={contentType:t.file.type},o=new Promise((function(e,r){t.generateVariation(t.file,t.FULL_IMAGE.maxDimension,t.FULL_IMAGE.quality,e)})),c=new Promise((function(e,r){t.generateVariation(t.file,t.THUMB_IMAGE.maxDimension,t.THUMB_IMAGE.quality,e)})),r.next=11,Promise.all([o,c]);case 11:if(l=r.sent,m=Date.now().toString(),d=t.uploadSingleUserImageFile(m+"_"+t.file.name,l[0],n,e),f=m+"_"+t.file.name.substring(0,t.file.name.lastIndexOf("."))+"_thumb."+t.file.name.substring(t.file.name.lastIndexOf(".")+1),v=t.uploadSingleUserImageFile(f,l[1],n,e),!e){r.next=25;break}if(""===t.backgroundImage.imageUrl){r.next=20;break}return r.next=20,t.deleteBackgroundImage().catch((function(e){console.log(e)}));case 20:return t.isUploadingBackgroundImage=!0,r.next=23,Promise.all([d,v]).then(function(){var e=Object(U.a)(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.backgroundImage.imageUrl=r[0],t.backgroundImage.teaserImageUrl=r[1],e.next=4,t.updateUserImageFirestore(1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){t.isUploadingBackgroundImage=!1,t.isChangingBackgroundImage=!0}));case 23:r.next=31;break;case 25:if(""===t.avatarImage.imageUrl){r.next=28;break}return r.next=28,t.deleteAvatarImage().catch((function(e){console.log(e)}));case 28:return t.isUploadingAvatarImage=!0,r.next=31,Promise.all([d,v]).then(function(){var e=Object(U.a)(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.avatarImage.imageUrl=r[0],t.avatarImage.teaserImageUrl=r[1],e.next=4,t.updateUserImageFirestore(0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){t.isUploadingAvatarImage=!1,t.isChangingAvatarImage=!0}));case 31:t.file=null;case 32:case"end":return r.stop()}}),r)})))()},uploadSingleUserImageFile:function(e,t,r,n){var o=this;return Object(U.a)(regeneratorRuntime.mark((function c(){var l,m,d;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(l=o.$fire.storage,!n){c.next=6;break}return m=l.ref("userImages/".concat(o.user.uid,"/backgroundImage/").concat(e)),c.abrupt("return",m.put(t,r).then((function(e){return e.ref.getDownloadURL().then((function(e){return e}))})).catch((function(e){console.error("Error uploading image",e)})));case 6:return d=l.ref("userImages/".concat(o.user.uid,"/avatarImage/").concat(e)),c.abrupt("return",d.put(t,r).then((function(e){return e.ref.getDownloadURL().then((function(e){return e}))})).catch((function(e){console.error("Error uploading image",e)})));case 8:case"end":return c.stop()}}),c)})))()},updateUserImageFirestore:function(e){var t=this;return Object(U.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,data={backgroundImage:t.backgroundImage,avatarImage:t.avatarImage},e.next=4,t.$fire.firestore.collection("users").doc(t.user.uid).update(data).then((function(){t.setAccountImages(data),t.success="Successfully updated!!",setTimeout((function(){t.success=null}),2e3)}));case 4:e.next=11;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),t.error="Could not set user information",setTimeout((function(){t.error=null}),2e3);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})))()}},Object(R.b)({fetchAccount:"account/FETCH_ACCOUNT"})),Object(R.d)({setAccount:"account/SET_ACCOUNT",setAccountProfileshow:"account/SET_ACCOUNT_PROFILESHOW",setAccountImages:"account/SET_ACCOUNT_IMAGES"})),{},{getInfo:function(){var e=this;return Object(U.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.account,e.tempFormShow=Object(F.cloneDeep)(r.profileShow),e.nickName=r.nickName,e.firstName=r.firstName,e.lastName=r.lastName,e.email=r.email,e.avatarImage={imageUrl:r.avatarImage&&r.avatarImage.imageUrl||"",teaserImageUrl:r.avatarImage&&r.avatarImage.teaserImageUrl||""},e.backgroundImage={imageUrl:r.backgroundImage&&r.backgroundImage.imageUrl||"",teaserImageUrl:r.backgroundImage&&r.backgroundImage.teaserImageUrl||""};case 8:case"end":return t.stop()}}),t)})))()},getRegisteredEvents:function(){var e=this;return Object(U.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$fire.firestore.collection("entries").where("userId","==",e.user.uid).get().then((function(e){var t=[];return e.forEach((function(e){var data=e.data();data&&data.eventId&&t.push(data.eventId)})),t}));case 2:r=t.sent,n=[],o=j(r);try{for(o.s();!(c=o.n()).done;)l=c.value,n.push(e.$fire.firestore.collection("events").doc(l).get())}catch(e){o.e(e)}finally{o.f()}return t.next=8,Promise.all(n).then((function(t){var r=[];Date.now();return t.forEach((function(t){var n=t.id,data=t.data();data&&data.isPublished&&r.push(A(A({id:n},data),{},{startDateTime:data.eventDateFrom+" "+data.eventTimeFrom,endDateTime:data.eventDateTo+" "+data.eventTimeTo,startDT:e.toWeekDateMin(data.eventDateFrom+"T"+data.eventTimeFrom),endDT:e.toWeekDateMin(data.eventDateTo+"T"+data.eventTimeTo),alteredLocation:data.location?data.location:data.isOnline?"Online":"N/A"}))})),r.length&&e.calculateRelevance(r),r}));case 8:e.registeredEvents=t.sent;case 9:case"end":return t.stop()}}),t)})))()},calculateRelevance:function(e){var t=Date.now(),r=e.map((function(e){return Date.parse(e.eventDateTo+"T"+e.eventTimeTo)})),n=r.reduce((function(e,t){return Math.max(e,t)}),0);e.forEach((function(e,i){var o=r[i]-t;r[i]>t&&(o=n+t-r[i]),e.relevanceValue=o}));var o=e.sort((function(a,b){return b.relevanceValue-a.relevanceValue}));o.forEach((function(e,i){e.relevanceValue=i+1})),e=o},getEventImages:function(e){var t=this;return Object(U.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e&&e.id){r.next=3;break}return t.eventImages=null,r.abrupt("return");case 3:return n=e.id,r.next=6,t.$fire.firestore.collection("eventImages").where("userId","==",t.user.uid).where("eventId","==",n).get().then((function(e){var t=[];return e.forEach((function(e){var r=e.id,data=e.data();t.push(A({id:r},data))})),t}));case 6:if((o=r.sent)[0]){r.next=11;break}return o={userId:t.user.uid,eventId:n,comment:"",createdAt:Date.now().toString(),updatedAt:Date.now().toString(),images:[]},r.next=11,t.$fire.firestore.collection("eventImages").add(o).then((function(e){o=[A(A({},o),{},{id:e.id})]})).catch((function(e){console.log(e)}));case 11:t.eventImages=A({userId:t.user.uid,eventId:n,comment:"",createdAt:Date.now().toString(),updatedAt:Date.now().toString(),images:[]},o[0]);case 12:case"end":return r.stop()}}),r)})))()},updateImageFirestore:function(){var e=this;return Object(U.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,data={userId:e.eventImages.userId,eventId:e.eventImages.eventId,images:e.eventImages.images,comment:e.eventImages.comment,createdAt:e.eventImages.createdAt,updatedAt:Date.now().toString()},t.next=4,e.$fire.firestore.collection("eventImages").doc(e.eventImages.id).update(data).then((function(){e.success="Successfully updated!!",setTimeout((function(){e.success=null}),2e3)}));case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),e.error="Could not set user information",setTimeout((function(){e.error=null}),2e3);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()},validateSubmit:function(){var e=this;return Object(U.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.bioform.validate()){t.next=13;break}return t.prev=2,data={email:e.email,country:e.country,dateOfEntry:e.dateOfEntry,expectedGraduationYear:e.expectedGraduationYear,firstName:e.firstName,lastName:e.lastName,nickName:e.nickName,major:e.major,interests:e.interests,university:e.university,degree:e.degree},t.next=6,e.$fire.firestore.collection("users").doc(e.user.uid).update(data).then((function(){e.setAccount(data),e.success="Successfully updated!!",setTimeout((function(){e.success=null}),2e3)}));case 6:t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),e.error="Could not set user information",setTimeout((function(){e.error=null}),2e3);case 12:e.newInfoDialog=!1;case 13:e.$refs.bioform.validate();case 14:case"end":return t.stop()}}),t,null,[[2,8]])})))()},deleteImage:function(e){var t=this;return Object(U.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.isDeletingImage[e]=!0,n=t.$fire.storage.refFromURL(t.eventImages.images[e].imageUrl).delete(),o=t.$fire.storage.refFromURL(t.eventImages.images[e].teaserImageUrl).delete(),r.abrupt("return",Promise.all([n,o]).then(Object(U.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.eventImages.images[e].imageUrl="",t.eventImages.images[e].teaserImageUrl="",r.next=4,t.updateImageFirestore();case 4:return r.abrupt("return",null);case 5:case"end":return r.stop()}}),r)})))).catch(function(){var r=Object(U.a)(regeneratorRuntime.mark((function r(n){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(console.error("Error deleting image",n),"storage/object-not-found"!==n.code){r.next=6;break}return t.eventImages.images[e].imageUrl="",t.eventImages.images[e].teaserImageUrl="",r.next=6,t.updateImageFirestore();case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).finally((function(){t.isDeletingImage[e]=!1})));case 4:case"end":return r.stop()}}),r)})))()},launchImageFile:function(e){var t="imageFile".concat(e);this.$refs[t][0].click()},uploadImageFile:function(e,t){var r=this;return Object(U.a)(regeneratorRuntime.mark((function n(){var o,c,l,m,d,f,v,h,x;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.length){n.next=2;break}return n.abrupt("return");case 2:if((o=e[0]).type.match("image.*")){n.next=6;break}return alert("Please upload an image."),n.abrupt("return");case 6:return c={contentType:o.type},l=new Promise((function(e,t){r.generateVariation(o,r.FULL_IMAGE.maxDimension,r.FULL_IMAGE.quality,e)})),m=new Promise((function(e,t){r.generateVariation(o,r.THUMB_IMAGE.maxDimension,r.THUMB_IMAGE.quality,e)})),n.next=11,Promise.all([l,m]);case 11:if(d=n.sent,f=Date.now().toString(),v=r.uploadSingleImageFile(f+"_"+o.name,d[0],c),h=f+"_"+o.name.substring(0,o.name.lastIndexOf("."))+"_thumb."+o.name.substring(o.name.lastIndexOf(".")+1),x=r.uploadSingleImageFile(h,d[1],c),""===r.eventImages.images[t].imageUrl){n.next=19;break}return n.next=19,r.deleteImage(t).catch((function(e){console.log(e)}));case 19:return r.isUploadingImage[t]=!0,n.next=22,Promise.all([v,x]).then(function(){var e=Object(U.a)(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.eventImages.images[t].imageUrl=n[0],r.eventImages.images[t].teaserImageUrl=n[1],e.next=4,r.updateImageFirestore();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){r.isUploadingImage[t]=!1}));case 22:case"end":return n.stop()}}),n)})))()},uploadSingleImageFile:function(e,t,r){return this.$fire.storage.ref("eventImages/".concat(this.eventImages.id,"/").concat(e)).put(t,r).then((function(e){return e.ref.getDownloadURL().then((function(e){return e}))})).catch((function(e){console.error("Error uploading image",e)}))},generateVariation:function(e,t,r,n){var o=this,c=new FileReader;c.onload=function(e){return c=e.target.result,(image=new Image).src=c,void(image.onload=function(){o.getScaledCanvas(image,t).toBlob(n,"image/jpeg",r)});var c,image},c.readAsDataURL(e)},getScaledCanvas:function(image,e){var t=document.createElement("canvas");return image.width>e||image.height>e?image.width>image.height?(t.width=e,t.height=e*image.height/image.width):(t.width=e*image.width/image.height,t.height=e):(t.width=image.width,t.height=image.height),t.getContext("2d").drawImage(image,0,0,image.width,image.height,0,0,t.width,t.height),t},addImage:function(){var e=this;if(this.eventImages.images.length>=6)return this.error="Cannot add more than 6 Photos. Please remove some photos first.",void setTimeout((function(){e.error=null}),5e3);this.eventImages.images.push({imageUrl:"",teaserImageUrl:""})},removeImage:function(e){var t=this;return Object(U.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.isMobileScreen){r.next=4;break}if(confirm("Are you sure?")){r.next=4;break}return r.abrupt("return");case 4:if(""===t.eventImages.images[e].imageUrl){r.next=12;break}return r.next=7,t.deleteImage(e);case 7:return t.eventImages.images.splice(e,1),r.next=10,t.updateImageFirestore();case 10:r.next=13;break;case 12:t.eventImages.images.splice(e,1);case 13:case"end":return r.stop()}}),r)})))()}})},C=D,T=(r(775),r(777),r(86)),component=Object(T.a)(C,(function(){var e=this,t=e._self._c;return e.user?t(f.a,[t(I.a,[t(d.a,[t(n.a,{staticStyle:{position:"fixed",left:"50%","z-index":"100",bottom:"50px",transform:"translate(-50%, -50%)",margin:"0 auto"},attrs:{type:"success",value:!!e.success}},[e._v(e._s(e.success))]),e._v(" "),t(n.a,{staticStyle:{position:"fixed",left:"50%","z-index":"100",bottom:"50px",transform:"translate(-50%, -50%)",margin:"0 auto"},attrs:{type:"error",value:!!e.error}},[e._v(e._s(e.error))])],1)],1),e._v(" "),t(I.a,[t(d.a,[t(v.a,{attrs:{"offset-y":"","max-width":"400px"},scopedSlots:e._u([{key:"activator",fn:function(n){var o=n.on;return[t(I.a,[t(d.a,{staticClass:"d-flex justify-center pb-0"},[t("div",{staticStyle:{position:"absolute",top:"0",width:"100%",height:"400px"}},[t("div",e._g({staticClass:"d-flex justify-center",staticStyle:{width:"100%",position:"relative",overflow:"hidden",height:"400px"},on:{mouseover:function(t){e.hoverBackground=!0},mouseleave:function(t){e.hoverBackground=!1}}},o),[e.hoverBackground?t("div",{staticStyle:{opacity:"40%","background-color":"#000",position:"absolute",left:"0",right:"0",margin:"auto",width:"100%","z-index":"1",height:"100%"}},[t(w.a,{staticStyle:{bottom:"0",left:"0",padding:"10px",position:"absolute",color:"white"}},[e._v("\n                      mdi-camera\n                    ")])],1):e._e(),e._v(" "),e.backgroundImage&&e.backgroundImage.imageUrl||e.isChangingBackgroundImage?t(y.a,{staticStyle:{"object-fit":"cover"},attrs:{src:e.imgFailed?"/img/default_background.jpg":e.backgroundImage.imageUrl,height:"100%",width:"100%"},on:{error:function(t){e.imgFailed=!0}}}):t("img",{staticStyle:{"object-fit":"cover"},attrs:{src:r(771),height:"100%",width:"100%"}})],1)])])],1)]}}]),model:{value:e.backgroundDialog,callback:function(t){e.backgroundDialog=t},expression:"backgroundDialog"}},[e._v(" "),t(c.a,[t(I.a,{staticStyle:{width:"inherit"}},[t(d.a,[e.uploadReadyBackground?t(h.a,{ref:"fileInputBackground",staticClass:"ma-10",attrs:{id:"fileIdBackground",rules:e.backgroundSizeRules,type:e.fileType,accept:e.acceptType,label:"Pick a new background","prepend-icon":"mdi-camera"},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}}):e._e()],1)],1),e._v(" "),t(l.a,[t(k.a),e._v(" "),t(o.a,{attrs:{color:"primary",text:""},on:{click:function(){e.backgroundDialog=!1}}},[e._v("\n              cancel")]),e._v(" "),t(o.a,{attrs:{color:"primary"},on:{click:function(){e.saveNewUserImage(1),e.backgroundDialog=!1}}},[e._v("\n              Upload\n            ")])],1)],1)],1)],1)],1),e._v(" "),t("div",{staticStyle:{"padding-top":"160px"}},[t(I.a,[t(d.a,[t(v.a,{attrs:{"offset-y":"","max-width":"400px"},scopedSlots:e._u([{key:"activator",fn:function(n){var o=n.on;return[t(I.a,[t(d.a,{staticClass:"d-flex justify-center pb-0",staticStyle:{"margin-top":"30px"}},[t("div",e._g({staticClass:"d-flex justify-center",staticStyle:{width:"fit-content",position:"relative","z-index":"100",border:"5px solid white"},on:{mouseover:function(t){e.hoverAvatar=!0},mouseleave:function(t){e.hoverAvatar=!1}}},o),[e.hoverAvatar?t("div",{staticStyle:{opacity:"40%","background-color":"#000",position:"absolute",left:"0",right:"0",margin:"auto",width:"100%",height:"100%","z-index":"200"}},[t(w.a,{staticStyle:{bottom:"0",left:"0",padding:"10px",position:"absolute",color:"white"}},[e._v("\n                      mdi-camera\n                    ")])],1):e._e(),e._v(" "),e.avatarImage&&e.avatarImage.imageUrl?t("img",{staticStyle:{"object-fit":"cover"},attrs:{src:e.imgFailed?"/img/image-not-found.png":e.avatarImage.imageUrl,height:"200",width:"200"},on:{error:function(t){e.imgFailed=!0}}}):t("img",{attrs:{src:r(774),height:"200",width:"200"}})])])],1),e._v(" "),t(I.a,[t(d.a,{staticClass:"d-flex justify-center text-center pa-0",attrs:{cols:"12"}},[t(l.c,[e._v("\n                  "+e._s(e.firstName+" "+e.lastName)+"\n                ")])],1)],1)]}}]),model:{value:e.avatarDialog,callback:function(t){e.avatarDialog=t},expression:"avatarDialog"}},[e._v(" "),t(c.a,[t(I.a,{staticStyle:{width:"inherit"}},[t(d.a,[e.uploadReadyAvatar?t(h.a,{ref:"fileInputAvatar",staticClass:"ma-10",attrs:{id:"fileIdAvatar",rules:e.avatarSizeRules,type:e.fileType,accept:e.acceptType,label:"Pick a new avatar","prepend-icon":"mdi-camera"},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}}):e._e()],1)],1),e._v(" "),t(l.a,[t(k.a),e._v(" "),t(o.a,{attrs:{color:"primary",text:""},on:{click:function(){e.avatarDialog=!1}}},[e._v("\n                cancel")]),e._v(" "),t(o.a,{attrs:{color:"primary"},on:{click:function(){e.saveNewUserImage(0),e.avatarDialog=!1}}},[e._v("\n                Upload\n              ")])],1)],1)],1)],1)],1),e._v(" "),t(I.a,[t(d.a,[t(l.c,{staticClass:"font-weight-bold"},[e._v("\n          Basic Information\n        ")]),e._v(" "),t(c.a,{staticClass:"pa-3"},[t(v.a,{staticStyle:{float:"right"},attrs:{"offset-y":"","max-width":"min(100%,800px)",scrollable:""},scopedSlots:e._u([{key:"activator",fn:function(r){var n=r.on;return[t(I.a,[t(d.a,{staticClass:"pb-5 pb-sm-0 d-flex justify-space-between justify-sm-end"},[t(o.a,{attrs:{nuxt:"",to:"/profile/".concat(e.user.uid),color:"grey lighten-3 black--text mr-3",dark:""}},[t(w.a,{attrs:{small:""}},[e._v("\n                      mdi-eye\n                    ")]),e._v("\n                     Preview\n                  ")],1),e._v(" "),t(o.a,e._g({attrs:{color:"primary",dark:""},on:{click:e.fillForm}},n),[t(w.a,{attrs:{small:""}},[e._v("\n                      mdi-pencil\n                    ")]),e._v("\n                     Edit\n                  ")],1)],1)],1)]}}]),model:{value:e.newInfoDialog,callback:function(t){e.newInfoDialog=t},expression:"newInfoDialog"}},[e._v(" "),t(c.a,{staticStyle:{height:"fit-content"}},[t(l.c,[t("span",{staticClass:"headline",staticStyle:{"word-break":"break-word"}},[e._v("\n                  Update Basic Info\n                ")])]),e._v(" "),t(x.a,{ref:"bioform",staticClass:"pa-4 pt-30",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(f.a,{staticStyle:{"max-width":"min(100%,800px)"}},[t(I.a,[t(d.a,{staticClass:"py-0",attrs:{cols:"12",md:"6",sm:"12"}},[t(_.a,{attrs:{rules:e.firstNameRules,label:"First Name",required:""},model:{value:e.tempForm.firstName,callback:function(t){e.$set(e.tempForm,"firstName",t)},expression:"tempForm.firstName"}})],1),e._v(" "),t(d.a,{staticClass:"py-0",attrs:{cols:"12",md:"6",sm:"12"}},[t(_.a,{attrs:{rules:e.lastNameRules,label:"Last Name",required:""},model:{value:e.tempForm.lastName,callback:function(t){e.$set(e.tempForm,"lastName",t)},expression:"tempForm.lastName"}})],1),e._v(" "),t(d.a,{staticClass:"py-0",attrs:{cols:"12",md:"6",sm:"12"}},[t(_.a,{attrs:{rules:e.nickNameRules,label:"Nick Name"},model:{value:e.tempForm.nickName,callback:function(t){e.$set(e.tempForm,"nickName",t)},expression:"tempForm.nickName"}})],1),e._v(" "),t(d.a,{staticClass:"py-0",attrs:{cols:"12",md:"6",sm:"12"}},[t(_.a,{attrs:{disabled:"",label:"E-mail",required:""},model:{value:e.tempForm.email,callback:function(t){e.$set(e.tempForm,"email",t)},expression:"tempForm.email"}})],1)],1)],1)],1)],1)],1),e._v(" "),t(I.a,{staticClass:"py-5 pt-0"},[t(d.a,{staticClass:"d-flex justify-space-between py-2",attrs:{cols:"12",md:"6",sm:"12"}},[t("div",{staticStyle:{width:"100%"}},[t(l.c,{staticClass:"d-flex justify-space-between pb-4"},[e._v(" NICK NAME                 \n              "),t(m.a,{staticClass:"mt-0 pt-0",attrs:{"hide-details":"",disabled:"","on-icon":"mdi-earth","off-icon":"mdi-lock"},model:{value:e.tempFormShow.nickName,callback:function(t){e.$set(e.tempFormShow,"nickName",t)},expression:"tempFormShow.nickName"}})],1),e._v(" "),e.nickName?t(l.b,[t("div",{staticStyle:{color:"#000","font-size":"18px"}},[e._v("\n                  "+e._s(e.nickName)+"\n                ")])]):t(l.b,[t("div",{staticStyle:{color:"#000","font-size":"18px"}},[e._v(e._s("N/A"))])])],1)]),e._v(" "),t(d.a,{staticClass:"d-flex justify-space-between py-2",attrs:{cols:"12",md:"6",sm:"12"}},[t("div",{staticStyle:{width:"100%"}},[t(l.c,{staticClass:"d-flex justify-space-between pb-4"},[e._v(" REAL NAME                 \n              "),t(m.a,{staticClass:"mt-0 pt-0",attrs:{"hide-details":"",disabled:e.settingProfileHide,color:"grey darken-2","on-icon":"mdi-earth","off-icon":"mdi-lock"},model:{value:e.tempFormShow.realName,callback:function(t){e.$set(e.tempFormShow,"realName",t)},expression:"tempFormShow.realName"}})],1),e._v(" "),e.firstName||e.lastName?t(l.b,[t("div",{staticStyle:{color:"#000","font-size":"18px"}},[e._v("\n                  "+e._s(e.firstName+" "+e.lastName)+"\n                ")])]):t(l.b,[t("div",{staticStyle:{color:"#000","font-size":"18px"}},[e._v(e._s("N/A"))])])],1)]),e._v(" "),t(d.a,{staticClass:"d-flex justify-space-between py-2",attrs:{cols:"12",md:"6",sm:"12"}},[t("div",{staticStyle:{width:"100%"}},[t(l.c,{staticClass:"d-flex justify-space-between pb-4"},[e._v(" EMAIL                 \n              "),t(m.a,{staticClass:"mt-0 pt-0",attrs:{"hide-details":"",disabled:"","on-icon":"mdi-earth","off-icon":"mdi-lock"},model:{value:e.tempFormShow.email,callback:function(t){e.$set(e.tempFormShow,"email",t)},expression:"tempFormShow.email"}})],1),e._v(" "),e.email?t(l.b,[t("div",{staticStyle:{color:"#000","font-size":"18px"}},[e._v("\n                  "+e._s(e.email)+"\n                ")])]):t(l.b,[t("div",{staticStyle:{color:"#000","font-size":"18px"}},[e._v(e._s("N/A"))])])],1)])],1)],1)],1)],1)],1)],1):t(f.a,[t("h1",[e._v("\n    You must be logged in to view this page.\n  ")]),e._v("\n  Go to "),t("NuxtLink",{staticClass:"primary--text",attrs:{to:"/"}},[e._v("\n      Home page\n  ")])],1)}),[],!1,null,"154c66f6",null);t.default=component.exports}}]);